<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NodeJS操作MySQL数据库 | Zeno Blog</title>
    <meta name="description" content="You cannot find peace by avoiding life.">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/Aeiherumuh10/icons/favicon.ico">
  <link rel="manifest" href="/Aeiherumuh10/manifest.json">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/Aeiherumuh10/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/Aeiherumuh10/icons/safari-pinned-tab.svg" color="#000000">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Aeiherumuh10/assets/css/0.styles.64dad53c.css" as="style"><link rel="preload" href="/Aeiherumuh10/assets/js/app.67d64c82.js" as="script"><link rel="preload" href="/Aeiherumuh10/assets/js/3.bd460faa.js" as="script"><link rel="preload" href="/Aeiherumuh10/assets/js/1.def91a3b.js" as="script"><link rel="preload" href="/Aeiherumuh10/assets/js/16.27061595.js" as="script"><link rel="preload" href="/Aeiherumuh10/assets/js/9.7f31ba26.js" as="script"><link rel="prefetch" href="/Aeiherumuh10/assets/js/10.08a199d8.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/11.263777cd.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/12.13bd9d3d.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/13.fac25735.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/14.ec8a899f.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/15.0fd25b17.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/17.1b6b775b.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/18.75f903c4.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/19.4c0ea89a.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/20.f40ec89e.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/21.9af0f13c.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/22.7d70d846.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/23.3a4d41a3.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/24.1682bed0.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/25.7439549e.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/26.d59ae40d.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/27.fd8948e5.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/28.e1ef3f22.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/29.e4142ad2.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/30.e0a9b672.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/31.c082db2b.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/32.321fd4f9.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/33.dd04e0e6.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/34.5ba1a0fb.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/35.05671695.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/36.d544e803.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/37.48be0b4f.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/38.5a220b2c.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/39.d38e5fce.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/4.5ad09e69.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/40.a1e6608f.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/41.e02cc0ed.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/42.91bd595e.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/43.a05a5d66.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/44.0c18bf61.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/45.f44428e6.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/46.c9d1aaac.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/47.0fa732ee.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/48.a6d4d507.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/49.51b963fc.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/5.ee83b1ae.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/50.49665ba3.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/51.1891be37.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/52.c98c6cac.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/53.b9bda6ea.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/54.f50e6ec5.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/55.1907f1b7.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/56.813988b9.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/57.39792d54.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/58.be4cc020.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/59.5f443d70.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/6.e516f7a5.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/60.aa60207c.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/61.58e90189.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/62.c25154f5.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/63.0c3b6aa8.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/64.fcc8b313.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/65.4bc2c3ad.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/66.a24efccf.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/67.c2251477.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/68.8e9a005b.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/69.e0b41ebd.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/7.d02c38f9.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/70.3d86f8cc.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/71.b230a7bc.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/72.9b3ebbd0.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/73.e64744ca.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/74.548be1f2.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/75.6b1b6af6.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/76.a96a3b62.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/77.7ba4b72d.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/78.3a802e85.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/79.76c6ccad.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/8.3614fb27.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/80.92eca30c.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/81.5030b3b0.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/82.2b8f010f.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/83.948b3e46.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/84.740962cf.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/85.4518e8fc.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/86.5b3c4204.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/87.480b9f16.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/88.04bf9a9d.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/89.1a292cfc.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/90.b464dc2a.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/91.1250851a.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/92.287b3ca5.js"><link rel="prefetch" href="/Aeiherumuh10/assets/js/93.cfa6c156.js">
    <link rel="stylesheet" href="/Aeiherumuh10/assets/css/0.styles.64dad53c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Zeno Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Zeno</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Aeiherumuh10/" class="home-link router-link-active"><img src="/Aeiherumuh10/images/head.jpg" alt="Zeno Blog" class="logo"> <span class="site-name">Zeno Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Aeiherumuh10/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Aeiherumuh10/categories/开发者日志/" class="nav-link"><i class="iconfont undefined"></i>
  开发者日志
</a></li></ul></div></div><div class="nav-item"><a href="/Aeiherumuh10/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Aeiherumuh10/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/aeiherumuh10" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/aeiherumuh10" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-zhihu"></i>
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://aeiherumuh10.gitee.io/zeno-blog/WeChat.PNG" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  微信
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/Aeiherumuh10/images/head.jpg" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    Zeno
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>81</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>17</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/Aeiherumuh10/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Aeiherumuh10/categories/开发者日志/" class="nav-link"><i class="iconfont undefined"></i>
  开发者日志
</a></li></ul></div></div><div class="nav-item"><a href="/Aeiherumuh10/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Aeiherumuh10/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/aeiherumuh10" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/aeiherumuh10" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-zhihu"></i>
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://aeiherumuh10.gitee.io/zeno-blog/WeChat.PNG" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  微信
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>NodeJS操作MySQL数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#nodejs操作mysql" class="sidebar-link">NodeJS操作MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#nodejs项目初始化" class="sidebar-link">NodeJS项目初始化</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#npm管理nodejs依赖" class="sidebar-link">npm管理NodeJS依赖</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#nodejs连接mysql" class="sidebar-link">NodeJS连接MySQL</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#查询结果分析" class="sidebar-link">查询结果分析</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#多条sql语句执行" class="sidebar-link">多条SQL语句执行</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#带参数sql语句执行" class="sidebar-link">带参数SQL语句执行</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#新增修改与删除的sql语句执行" class="sidebar-link">新增修改与删除的SQL语句执行</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#软删除（逻辑删除）" class="sidebar-link">软删除（逻辑删除）</a></li><li class="sidebar-sub-header"><a href="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html#mysql操作的封装" class="sidebar-link">MySQL操作的封装</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>NodeJS操作MySQL数据库</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Zeno</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>NodeJS操作MySQL数据库</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>Zeno</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2020-03-13</span></i> <i class="iconfont reco-eye" data-v-484a899e><span id="/Aeiherumuh10/views/DataBase_doc/NodeJS%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-484a899e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      DataBase-MySQL
    </span><span class="tag-item" data-v-484a899e>
      NodeJs
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="nodejs操作mysql"><a href="#nodejs操作mysql" class="header-anchor">#</a> NodeJS操作MySQL</h2> <p>NodeJS是一个后台语言，在创建NodeJS项目的时候也需要进行初始化，就像我们在创建网页项目的时候，要新建<code>img</code>,<code>css</code>以及<code>js</code>文件夹，同时导入兼容或初始化CSS的文件<code>normalize.css</code>,有时候还需要在网页里面设置<code>meta</code>标签，这些都是项目的初始化</p> <h3 id="nodejs项目初始化"><a href="#nodejs项目初始化" class="header-anchor">#</a> NodeJS项目初始化</h3> <p>NodeJS的项目需要初始化，我们在一个空的项目里面去使用发下命令初始化</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> init 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当在控制台执行上面的命令以后，我们就会在控制台输入一系列的信息，如项目名称，项目版本，项目描述信息，项目关键字，项目版权等信息</p> <p>当相关的信息输入完成以后，这个时候项目下来会默认帮我们生成一个<code>package.json</code>文件，这就是项目的初始化配置信息文件，这个文件记录了当前项目的所有信息</p> <p><strong>package.json文件信息如下</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mysqldemo01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;杨标连接mysql测试&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;nodejs&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;demo&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;杨标&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><ul><li>name代表项目名称</li> <li>version代表项目的版本号</li> <li>description代表项目的描述信息</li> <li>main代表项目从哪个文件开始执行</li> <li>scripts项目的脚本配置信息，非常重要，配置了这个以后，项目可以快速启动（相当于告别第三方人员这个项目怎么启动，或者有哪些命令可以执行）</li> <li>keywords关键字</li> <li>author作者</li> <li>license版信息</li></ul></blockquote> <p>如果在平时的开发当中，希望快速的生成上面的信息，我们可以直接在刚刚的命令后面添加一个参数</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> init --yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加这个参数以后代表不询问用户，直接生成</p> <h3 id="npm管理nodejs依赖"><a href="#npm管理nodejs依赖" class="header-anchor">#</a> npm管理NodeJS依赖</h3> <p>在NodeJS的项目里面，我们通过<code>npm</code>来管理它的包模块，可以通过<code>npm install</code>来从服务器下载第三方的模块</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> mysql --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当我们在后面使用了<code>--save</code>的参数以后，这一次的安装记录就会添加到项目配置文件<code>package.json</code> 里面保存起来</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mysqldemo1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;杨标使用NodeJS连接MySQL数据库&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;mysql&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.17.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>上面的<code>dependencies</code>就代表了这个项目的依赖信息，也就是通过npm安装的包都会在这里</p> <h3 id="nodejs连接mysql"><a href="#nodejs连接mysql" class="header-anchor">#</a> NodeJS连接MySQL</h3> <p>NodeJS如果要连接MySQL需要借助于第三方的依赖包，这个包我们已经通过npm下载好了，现在我们可以直接使用了</p> <h4 id="导入模块包"><a href="#导入模块包" class="header-anchor">#</a> 导入模块包</h4> <p>NodeJS的模块化使用的是<code>CommonJS</code>，它使用关键字<code>require</code>导入 ，使用<code>moudle.exports</code>导出</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过上面的代码，我们就可以导入mysql的包，得到一个对象</p> <p>但是按照约定原则，导入的资源是不可更改的，所以我们使用关键字const来定义接收的对象</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="创建数据库连接"><a href="#创建数据库连接" class="header-anchor">#</a> 创建数据库连接</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建数据库连接</span>
<span class="token keyword">let</span> conn <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    host<span class="token operator">:</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span><span class="token number">3306</span><span class="token punctuation">,</span>
    user<span class="token operator">:</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span><span class="token string">&quot;aaabbb&quot;</span><span class="token punctuation">,</span>
    database<span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
    multipleStatements<span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//连接mysql数据库 </span>
conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>host代表服务器地址</li> <li>port代表端口号（Number类型）</li> <li>user代表用户名</li> <li>password代表密码</li> <li>database代表数据库</li> <li>multipleStatements开启多条SQL语句执行</li></ul></blockquote> <p>当连接完成数据库以后，我们就可以去执行我们的第一条SQL语句了</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//第一步：先准备好SQL语句</span>
<span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;select * from stuinfo&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//第二步：执行SQL语句</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SQL语句执行完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//当SQL语句执行失败的时候，会有一个err信息，当SQL语句执行成功以，执行的结果在result里面</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//说明SQL语句执行失败了</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//关闭数据库连接，资源</span>
    conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>当使用<code>conn.query()</code>执行SQL语句的时候，它会有一个回调函数，我们使用箭头函数回调，回调函数里面有两个参数，第一个参数代表执行错误的信息<code>err</code>，第二个参数代表执行成功的结果<code>result</code></p> <h3 id="查询结果分析"><a href="#查询结果分析" class="header-anchor">#</a> 查询结果分析</h3> <p>当执行完查询语句以后，会返回一个对象<code>result</code> ,这是一个数组，里面的每一条记录都是一个对象，格式如下</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040001</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '刘幸'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '女'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040002</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '杨标'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '男'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这个结果把数据的每一页都当成一个属性名，这一列的值当成了属性值。所以当我们需要对里在的结果进行处理的时候，只需要按照常规的对象操作就可以了</p> <p>如果执行是统计计数等这种情况，可以通过如下方式</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">query2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;select count(*) 'totalCount' from stuinfo&quot;</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>totalCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>结果如下</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span> totalCount<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="多条sql语句执行"><a href="#多条sql语句执行" class="header-anchor">#</a> 多条SQL语句执行</h3> <p>MySQL数据库本身是支持多条SQL语句执行的，我们在NodeJS里面如果需要执行多条SQL语句，必须在配置项里面添加一个新的配置<code>multipleStatements:true</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建数据库连接</span>
<span class="token keyword">let</span> conn <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   host<span class="token operator">:</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
   port<span class="token operator">:</span><span class="token number">3306</span><span class="token punctuation">,</span>
   user<span class="token operator">:</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
   password<span class="token operator">:</span><span class="token string">&quot;aaabbb&quot;</span><span class="token punctuation">,</span>
   database<span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
   multipleStatements<span class="token operator">:</span><span class="token boolean">true</span>    <span class="token comment">//关键在这里，开启多条SQL语句执行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//连接mysql数据库 </span>
conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>当开启多条SQL语句执行以后，我们就可以执行下面的代码了</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        select * from classinfo;
        select * from stuinfo;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在定义<code>strSql</code>的时候，我们使用的模板字符串，这里面有两条SQL语句，每条SQL语句使用分号<code>;</code>结束，我们去执行就不会有问题了</p> <p><strong>执行结果如下</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span> 
  <span class="token punctuation">[</span> 
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> cid<span class="token operator">:</span> 'H<span class="token number">1904</span>'<span class="token punctuation">,</span> cname<span class="token operator">:</span> '前端<span class="token number">19</span>年<span class="token number">04</span>班' <span class="token punctuation">}</span><span class="token punctuation">,</span>
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> cid<span class="token operator">:</span> 'J<span class="token number">1908</span>'<span class="token punctuation">,</span> cname<span class="token operator">:</span> 'Java<span class="token number">19</span>年<span class="token number">08</span>班' <span class="token punctuation">}</span><span class="token punctuation">,</span>
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> cid<span class="token operator">:</span> 'J<span class="token number">1919</span>'<span class="token punctuation">,</span> cname<span class="token operator">:</span> 'Java<span class="token number">19</span>年<span class="token number">09</span>班' <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> 
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040001</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '刘幸'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '女'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040002</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '杨标'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '男'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> 
  <span class="token punctuation">]</span> 
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>它的结果是一个二维数组，在这个二维数组里面，每一项都是一个结果，第一项代表第一个SQL语句执行的结果，第二项代表第二条SQL语句执行的结果，依冷类推</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//第一个结果</span>
result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   
result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cid<span class="token punctuation">;</span>
<span class="token comment">//第二个结果</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sname<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="带参数sql语句执行"><a href="#带参数sql语句执行" class="header-anchor">#</a> 带参数SQL语句执行</h3> <p>在刚刚的代码里面，我们所有的SQL语句都是没有参数的，如果这个SQL语句有条件了，并且条件不固定 ，这个时候怎么处理呢？</p> <p>它的处理方式与JAVA非常相似，都是在SQL语句里面用<code>?</code>去替代参数，然后在执行的过程当中，使用具体的值去替代<code>?</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">query4</span><span class="token punctuation">(</span><span class="token parameter">sid</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;select * from stuinfo where sid=?&quot;</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">[</span>sid<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">query4</span><span class="token punctuation">(</span><span class="token string">&quot;H19040001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ol><li><p>SQL语句里面的参数使用了<code>?</code></p></li> <li><p>在<code>conn.query()</code>方法里面，参数由原来的2个变成3个，第二个参数是一个数组，里面装是SQL语句里面要替换成<code>?</code>的具体值</p></li></ol></blockquote> <h3 id="新增修改与删除的sql语句执行"><a href="#新增修改与删除的sql语句执行" class="header-anchor">#</a> 新增修改与删除的SQL语句执行</h3> <p>查询语句的SQL与其它类型的SQL是不一样的，查询语句的SQL返回的是一个数组，因为查询有结果，而在执行新增，修改与删除SQL语句的时候，它返回的都是一个受影响的行数，所以，这个时候，我们得到的<code>result</code>对象是不一样的</p> <p><strong>新增操作</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">sid<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;insert into stuinfo (sid,sname,ssex,sage) values (?,?,?,?)&quot;</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">[</span>sid<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;H19040006&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>得到的result结果如下</strong>:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>OkPacket <span class="token punctuation">{</span>
  fieldCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  affectedRows<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  insertId<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
  serverStatus<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  message<span class="token operator">:</span> ''<span class="token punctuation">,</span>
  protocol<span class="token number">41</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  changedRows<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>affectedRows</code>代表受影响的行数</li> <li><code>insertId</code>代表的意思则是如果当前表里有自增长键，则返回的是这个自增长的id</li></ul> <hr> <p><strong>修改操作</strong></p> <p>修改的操作与新增的操作是一样的，返回一个对象</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">sname<span class="token punctuation">,</span>id</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;update stuinfo set sname=? where id=?&quot;</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">[</span>sname<span class="token punctuation">,</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;小乖乖&quot;</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>结果如下</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>OkPacket <span class="token punctuation">{</span>
  fieldCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  affectedRows<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  serverStatus<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  message<span class="token operator">:</span> '(Rows matched<span class="token operator">:</span> <span class="token number">1</span>  Changed<span class="token operator">:</span> <span class="token number">1</span>  Warnings<span class="token operator">:</span> <span class="token number">0</span>'<span class="token punctuation">,</span>
  protocol<span class="token number">41</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  changedRows<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>第二种结果</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>OkPacket <span class="token punctuation">{</span>
 fieldCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
 affectedRows<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
 insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
 serverStatus<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
 warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
 message<span class="token operator">:</span> '(Rows matched<span class="token operator">:</span> <span class="token number">1</span>  Changed<span class="token operator">:</span> <span class="token number">0</span>  Warnings<span class="token operator">:</span> <span class="token number">0</span>'<span class="token punctuation">,</span>
 protocol<span class="token number">41</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 changedRows<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>affectedRows</code>代表受影响的行</li> <li><code>changedRows</code>代表改变的行数，当改变前和改变后是相同的，则结果为0</li></ul> <hr> <p><strong>删除操作</strong></p> <p>删除操作与上面两种操作方式一样</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;delete from stuinfo where ssex=?&quot;</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">[</span>sex<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>返回的结果</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>OkPacket <span class="token punctuation">{</span>
  fieldCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  affectedRows<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  serverStatus<span class="token operator">:</span> <span class="token number">34</span><span class="token punctuation">,</span>
  warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  message<span class="token operator">:</span> ''<span class="token punctuation">,</span>
  protocol<span class="token number">41</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  changedRows<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>affectedRows</code>代表受影响的行数</li></ul> <p>在数据库的操作过程当中，我们把查询语句分为一类，把修改，新增与删除分为一类</p> <hr> <p>如果这两种类型的SQL语句去混合执行的时候，我们要看一下它返回的结果</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
update stuinfo set sage=sage+1 where sage&lt;30;
select * from stuinfo;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>返回的结果如下</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span> OkPacket <span class="token punctuation">{</span>
    fieldCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    affectedRows<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    insertId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    serverStatus<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    warningCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    message<span class="token operator">:</span> '(Rows matched<span class="token operator">:</span> <span class="token number">2</span>  Changed<span class="token operator">:</span> <span class="token number">2</span>  Warnings<span class="token operator">:</span> <span class="token number">0</span>'<span class="token punctuation">,</span>
    protocol<span class="token number">41</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    changedRows<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040002</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '杨标'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '男'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">31</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040003</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '向继秘'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '男'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    RowDataPacket <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> sid<span class="token operator">:</span> 'H<span class="token number">19040006</span>'<span class="token punctuation">,</span> sname<span class="token operator">:</span> '小乖乖'<span class="token punctuation">,</span> ssex<span class="token operator">:</span> '男'<span class="token punctuation">,</span> sage<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在返回的<code>result</code>  结果里面，它仍然是一个二维数组，数组每次一项是第一条更新SQL语句的结果，第二项则是查询SQL语句的结果</p> <h3 id="软删除（逻辑删除）"><a href="#软删除（逻辑删除）" class="header-anchor">#</a> 软删除（逻辑删除）</h3> <p>在正常的开发和设计工作里面，可能会涉及到删除的操作，但是删除是一个非常危险的操作，同时当关系型数据库里面表与表之间构建成主外键约束以后就不能够再删除对象，所以这个时候，我们需要采用另一种方式来删除，这种方式通过逻辑删除（也叫软删除）</p> <p>现在我们将数据库的字段重新定义</p> <p><img src="/assets/1569743560996.png" alt="1569743560996"></p> <p>在这一个 <code>isDel</code> 上面给它一个默认值<code>false</code>,通过<code>isDel</code>这一列我们来判断这一条数据是否是处理删除状态</p> <p>在后在工作当中设计数据库的时候，都要保证有这一列，并且要设置默认值为<code>false</code></p> <p>一旦使用了软删除以后，在接下来的操作过程当中，无论是进行什么操作，最后都要加一个限制条件<code>isDel=false</code>,如下所示</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stuinfo <span class="token keyword">where</span> isDel<span class="token operator">=</span><span class="token boolean">false</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个时候通过查询得到的就是没有被删除的状态</p> <p>如果需要删除某一条数据 ，则已经不能够使用<code>delete</code>语句了,转而使用<code>update</code>关键字来进行，而需要进行如下操作</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> stuinfo <span class="token keyword">set</span> isDel<span class="token operator">=</span><span class="token boolean">true</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>使用软删除的好处</strong></p> <ol><li>防止数据删除失误 ，如果软删除可以恢复数据，只要把<code>isDel</code>设置成false</li> <li>通过这种方式，我们可以在这里去操作主外键关系表</li></ol> <p><strong>使用软删除的缺点</strong></p> <ol><li>数据冗余量大，删除以后的数据还保存在数据库里面</li> <li>操作会变得麻烦，每次查询的时候都添加一个限定条件<code>isDel=false</code></li></ol> <h3 id="mysql操作的封装"><a href="#mysql操作的封装" class="header-anchor">#</a> MySQL操作的封装</h3> <p>在项目的开发过各当中，我们经常会使用各种各样的数据库操作，这个时候，我们可以把数据库的连接，以及查询的方法封装成一个对象，在开发过程当中直接调用，现将代码整理如下</p> <p><strong>目录结构</strong></p> <p><img src="/assets/1569749204573.png" alt="1569749204573"></p> <p><strong>第一步：在config文件夹下面创建 dbConfig.js文件</strong>，这个文件记录了数据库连接的配置信息</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @description  数据库配置信息
 * @exports dbConfig 数据库配置对象
 */</span>

<span class="token keyword">const</span> dbConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
    user<span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">&quot;aaabbb&quot;</span><span class="token punctuation">,</span>
    database<span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
    multipleStatements<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token operator">=</span>dbConfig<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>第二步：在utils 的文件夹下面创建DBUtil.js文件</strong>，用于封装数据库的常用操作</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> dbConfig<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../config/dbConfig.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mysql<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @name DBUtil.js 
 * @description 数据库操作核心
 * @requires [dbConfig,mysql] 数据库配置信息，mysql操作包
 */</span>


<span class="token comment">/**
 * @class DBUtil
 * @description 数据库操作核心对象
 * @version 1.0
 * @author 杨标
 */</span>
<span class="token keyword">class</span> <span class="token class-name">DBUtil</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * @name getConn 获取数据库连接
     * @returns {object} 返回数据库连接
     */</span>
    <span class="token keyword">static</span> <span class="token function">getConn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> conn<span class="token operator">=</span>mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>dbConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @name executeSql 执行某一条SQL语句
     * @param {String} strSql 要执行的SQL语句
     * @param {Array} params  执行这条SQL语句的参数
     * @returns {Promise} 返回一个promise的承诺
     */</span>
    <span class="token keyword">static</span> <span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token parameter">strSql<span class="token punctuation">,</span>params<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 这resolve代表成功的方法 reject代表失败的方法</span>
        <span class="token comment">// Promise的写法是固定写法，这是其中的一种写法</span>
        <span class="token keyword">let</span> promise<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//第一步：先获取数据库的连接</span>
            <span class="token keyword">let</span> conn<span class="token operator">=</span>DBUtil<span class="token punctuation">.</span><span class="token function">getConn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//第二步：执行SQL语句</span>
            conn<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>strSql<span class="token punctuation">,</span>params<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//代表执行失败  指catch</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span><span class="token punctuation">{</span>
                    <span class="token comment">//代表成功  成功以后继续操作 指then</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                conn<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> promise<span class="token punctuation">;</span>  <span class="token comment">//返回这个“承诺”</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span>DBUtil<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><ul><li>在封装的过程当中，我们使用了class对象进行封装，同时使用了静态方法</li> <li>在方法<code>executeSql</code>里面，我们使用了<code>Promise</code> 对象进行处理，该对外主要用于对JS里面的异步操作进行封装，这个对象内部有3个状态，常用的为<code>resolve</code>成功状态和<code>reject</code>失败状态，还有一个等待状态(<code>pending</code>)。它是一个构造函数，需要<code>new</code>进行调用，同时在创建的过程当中，它接收一个回调方法，回调方法里有两个参数<code>resolve与reject</code> 分别代表成功以后的操作与失败以后的操作<code>new Promise((resolve,reject)=&gt;{})</code></li> <li>在方法的最后，我们返回了这个创建好promise对象</li></ul> <blockquote><p>promise是JS目前最好的异步解决方法，它可以将异步转换为同步操作</p></blockquote> <p><strong>第三步：在app.js里调用封装的方法进行测试</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> DBUtil <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./utils/DBUtil.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">query1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> strSql<span class="token operator">=</span><span class="token string">&quot;select * from stuinfo where isDel=false&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//当调用这个方法的时候，如果这个方法返回是promise，则有两个方法会执行</span>
    <span class="token comment">//成功会自动执行then里面的回调方法</span>
    <span class="token comment">//失败自动执行catch 里面的回调方法</span>
    DBUtil<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span>strSql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我执行成功了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我执行失败了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">query1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>因为之前已经封装了<code>executeSql</code>这个方法，所以我们在调用这个方法的时候，它返回了一个<code>promise</code> 的“承诺”给我们，这个承诺如果内部执行的是<code>resolve()</code>成功，则自动调用<code>then()</code>里面的回调方法，如果承诺内部执行是<code>reject()</code>失败，则自动调用<code>catch()</code>里面的回调方法</p> <p><img src="/assets/1569749762023.png" alt="1569749762023"></p> <hr> <p>上面是promise的常规用法，我们使用promise解决了刚刚的回调问题，但是仍然在外面还有两个回调，我们可以使用使用ES6里面的另一各解决方法，直接将异步转为同步</p> <p><em>异步执行，同步是等待</em></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//异步转同步</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">query2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> strSql <span class="token operator">=</span> <span class="token string">&quot;select * from stuinfo123 where isDel=false&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> DBUtil<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span>strSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// await等待的是then里面的结果 也就是resove里面的结果</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果失败会向系统抛异常</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//这就是catch里面的东西，也相当于reject里面的结果</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;失败就在这里&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>Promise</code>的内部是通过三种状态来切换的，最初是<code>pending</code>等待状态</li> <li><code>await</code>可以等待Promise的结果，但它等待到的只能是成功<code>resolve</code>的结果</li> <li>如果<code>Promise</code>的内部发生了<code>reject</code> 则会向系统抛异步 ，我们可以通过<code>try...catch</code>去捕捉到这个异步</li> <li><code>await</code>必须在方法里使用，是因为一旦使用了这个await就必须配置<code>async</code>这个关键字一起使用，两者缺一不可</li></ul> <p>所以<code>Promise</code>+<code>await/async</code>是JS里面，异步转同步的最好方法</p> <hr></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/13/2020, 10:12:13 PM</span></div></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div><!----><div class="reco-bgm-panel" data-v-43301d0e><audio id="bgm" src="http://aeiherumuh10.gitee.io/zeno-blog/bgm/Jay/晴天-周杰伦.mp3" data-v-43301d0e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-43301d0e data-v-41bcba48 data-v-43301d0e><img src="http://aeiherumuh10.gitee.io/zeno-blog/bgm/Jay/JayChou.jpg" data-v-43301d0e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-43301d0e data-v-41bcba48 data-v-43301d0e><div class="reco-bgm-cover" style="background-image:url(http://aeiherumuh10.gitee.io/zeno-blog/bgm/Jay/JayChou.jpg);" data-v-43301d0e><div class="mini-operation" style="display:none;" data-v-43301d0e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-43301d0e></i></div> <div class="falut-message" style="display:none;" data-v-43301d0e>播放失败</div></div> <div class="reco-bgm-info" data-v-43301d0e data-v-41bcba48 data-v-43301d0e><div class="info-box" data-v-43301d0e><i class="reco-bgm reco-bgm-music music" data-v-43301d0e></i>
            晴天
          </div> <div class="info-box" data-v-43301d0e><i class="reco-bgm reco-bgm-artist" data-v-43301d0e></i>
            周杰伦
          </div> <div class="reco-bgm-progress" data-v-43301d0e><div class="progress-bar" data-v-43301d0e><div class="bar" data-v-43301d0e></div></div></div> <div class="reco-bgm-operation" data-v-43301d0e><i class="reco-bgm reco-bgm-last last" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-play play" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-next next" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-43301d0e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-43301d0e></i> <div class="volume-bar" data-v-43301d0e><div class="bar" data-v-43301d0e></div></div></div></div> <div class="reco-bgm-left-box" data-v-43301d0e data-v-41bcba48 data-v-43301d0e><i class="reco-bgm reco-bgm-left" data-v-43301d0e></i></div></div></div></div></div>
    <script src="/Aeiherumuh10/assets/js/app.67d64c82.js" defer></script><script src="/Aeiherumuh10/assets/js/3.bd460faa.js" defer></script><script src="/Aeiherumuh10/assets/js/1.def91a3b.js" defer></script><script src="/Aeiherumuh10/assets/js/16.27061595.js" defer></script><script src="/Aeiherumuh10/assets/js/9.7f31ba26.js" defer></script>
  </body>
</html>
